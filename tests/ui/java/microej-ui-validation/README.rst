MicroEJ UI Validation
=====================

Overview
--------

This project contains test cases aimed at validating the correct runtime execution 
of UI Pack on a MicroEJ Platform connected to a Board Support Package (BSP).
 
Tests are written as JUnit test cases, thus the main entry point is automatically generated by MicroEJ SDK.

Requirements
------------

-  MicroEJ SDK version ``5.1.0`` (included in MicroEJ SDK dist. ``19.05``).
-  MicroEJ Platform built from a MicroEJ UI Pack version ``13.0.0`` or higher.

Usage
-----

In MicroEJ SDK,

-  Select ``Run > Run Configurations...``. A launcher named
   ``microej-ui-validation`` should be available under
   ``MicroEJ Application``.
   
-  In ``Execution`` tab, select the target MicroEJ Platform.

-  Click on ``Run`` button to compile the MicroEJ Application.

-  Link the BSP project with the MicroEJ Application (``microejapp.o``), 
   the MicroEJ Platform runtime (``microejruntime.a``) and the MicroEJ Platform header files (``*.h``).

-  The tests don't use assertions and prints only some reports. 
 
-  See below for an output example

::

   -> Check LCD tearing: full screen (LLUI_DISPLAY_IMPL_flush validation)...
   Property 'com.microej.ui.tests.clock.seconds' is not set (default to '10' second(s))
   OK: testTearingFullScreen
   -> Check LCD tearing: black band (LLUI_DISPLAY_IMPL_flush validation)...
   Property 'com.microej.ui.tests.clock.seconds' is not set (default to '10' second(s))
   OK: testTearingVerticalBand
   Property 'com.microej.ui.tests.flush.tolerance.us' is not set (default to '200' us)
   LCD framerate time is 16868 us (59.2838516 Hz)
   Retrieve the maximal drawing time (this will take several seconds)...
   The flush time is 938 us
   To have an animation at 59.2838516 Hz, the drawing time cannot be higher than 15.9300003 ms.
   To have an animation at 29.6419258 Hz, the drawing time cannot be higher than 32.7980003 ms.
   To have an animation at 19.7612838 Hz, the drawing time cannot be higher than 49.6660003 ms.
   OK: testDrawingTime
   PASSED: 3

Tearing
-------

The tearing effect (flickering) is visible on LCD when the flush job is not synchronized with
the LCD tearing signal (TE). 

Test "Full screen" toggles black and white screens. When flush job is synchronized and quite
fast, the LCD is gray. When it is not synchronized, the LCD content may be cut in two or 
several parts. 

Test "Black band" moves a black band on a white background. When flush job is not synchronized, 
the band seems cut in two or more parts.  

Drawing Time
------------

Test "Drawing time" determinates the maximum drawing time (in milliseconds) to have the better
framerate. The better framerate depends on LCD framerate and on post-flush copy step. When the
drawing time exceeds the maximum drawing time, the framerate is divided by two when the flush
job is synchronized on LCD tearing signal.

Dependencies
------------

*All dependencies are retrieved transitively by MicroEJ Module Manager*.

Source
------

N/A

Restrictions
------------

None.

..
    Copyright 2021 MicroEJ Corp. All rights reserved.
    This library is provided in source code for use, modification and test, subject to license terms.
    Any modification of the source code will break MicroEJ Corp. warranties on the whole library.
